<!DOCTYPE html>
<html lang="nl">
	<head>
		<meta charset="UTF-8">

		<title>Pages</title>

    <%- include ../partials/head -%>

    <%- include ../partials/header -%>

    <h1>Pages</h1>

		<button data-add="page">Add new page</button>

		<ul id="pageTypes" style="display: none;">
			<% for (let i = 0; i < system.types.length; i++) { %>
				<li>
					<a href="/subterra/pages/add/<%= system.types[i] %>">Add <%= system.types[i] %></a>
				</li>
			<% } %>
		</ul>

    <% if (system.pages.length > 0) { %>
      <ul>
        <% for (let i = 0; i < system.pages.length; i++) { %>
          <li>
            <a href="/subterra/pages/edit/<%= system.pages[i].id %>">
              <%= system.pages[i].title %>
            </a>
						| <%= system.pages[i].type %>
						<button data-action="delete page" onclick="deleteItem('pages', <%= system.pages[i].id %>)">delete</button>
          </li>
        <% } %>
      </ul>
    <% } else { %>
      <p>No pages found.</p>
    <% } %>

		<script>
			const newPage = document.querySelector('[data-add="page"]');
			const pageTypes = document.querySelector('#pageTypes');

			newPage.addEventListener('click', () => {
				pageTypes.style.display = 'block';
			});

			// Delete item from database
			function deleteItem(category, id) {
				if (confirm('Are you sure you want to delete this?') === true) {
					window.location = `/subterra/${ category }/delete/${ id }`;
				}
			}
		</script>

    <%- include ../partials/footer -%>
